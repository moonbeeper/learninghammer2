[gd_scene load_steps=16 format=3 uid="uid://cggqlwb1qdsem"]

[ext_resource type="Script" uid="uid://dmgqtn6kigcqi" path="res://scripts/player.gd" id="1_u63mc"]
[ext_resource type="Texture2D" uid="uid://ck4vfksub38gf" path="res://materials/flashlight_pattern.png" id="2_bms3g"]
[ext_resource type="Texture2D" uid="uid://b0p0sajl6f2a4" path="res://materials/player_shadow.png" id="3_me0cc"]
[ext_resource type="Material" uid="uid://dg36fnthsm7cw" path="res://materials/crosshair.tres" id="4_7lbay"]
[ext_resource type="Texture2D" uid="uid://dmipqji2p8aqd" path="res://materials/crosshair.png" id="4_hqdnm"]
[ext_resource type="Script" uid="uid://crl5y3f7qfi0p" path="res://scripts/fps_label.gd" id="5_ejohg"]
[ext_resource type="Script" uid="uid://cy3mht08veghx" path="res://scripts/player_info_caption.gd" id="5_qbdof"]
[ext_resource type="Texture2D" uid="uid://cclekf6ove05e" path="res://materials/caption_info_icon.png" id="6_2wrp4"]
[ext_resource type="PackedScene" uid="uid://b4pfsar60i5br" path="res://nodes/caption_label.tscn" id="7_4n5g4"]
[ext_resource type="Shader" uid="uid://dlf30ffrp7ve1" path="res://shaders/curved_ui.gdshader" id="7_46y3y"]
[ext_resource type="PackedScene" uid="uid://c5x8ft3bmpfg" path="res://nodes/caption_key_name.tscn" id="7_hg0js"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bms3g"]
radius = 0.32
height = 1.44

[sub_resource type="ShaderMaterial" id="ShaderMaterial_46y3y"]
shader = ExtResource("7_46y3y")
shader_parameter/curve_strength = 0.30000006175000005

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_2wrp4"]
content_margin_left = 4.0
content_margin_right = 4.0
bg_color = Color(0.1, 0.1, 0.1, 0.6)
corner_radius_top_left = 5
corner_radius_top_right = 5

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_7lbay"]
bg_color = Color(0.6431373, 0.6431373, 0.6431373, 1)
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("head", "collision", "camera", "ray_stair_below", "ray_stair_front", "hand_point", "flash_spot_light", "ui_crosshair")]
script = ExtResource("1_u63mc")
head = NodePath("Head")
collision = NodePath("CollisionShape3D")
camera = NodePath("Head/Camera3D")
ray_stair_below = NodePath("StarsBelow")
ray_stair_front = NodePath("StarsFront")
hand_point = NodePath("Head/Camera3D/HandPoint")
flash_spot_light = NodePath("Flashlight")
ui_crosshair = NodePath("CanvasLayer/Control/crosshair")
max_head_rotation = 80.0
metadata/_edit_horizontal_guides_ = [468.0]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
shape = SubResource("CapsuleShape3D_bms3g")
debug_color = Color(0, 1, 0.69803923, 0.41960785)

[node name="Head" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4000001, 0)

[node name="Camera3D" type="Camera3D" parent="Head"]
current = true

[node name="AudioListener3D" type="AudioListener3D" parent="Head/Camera3D"]
current = true

[node name="HandPoint" type="Node3D" parent="Head/Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)

[node name="StarsBelow" type="RayCast3D" parent="."]
target_position = Vector3(0, -0.75, 0)

[node name="StarsFront" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.3, -0.5)
target_position = Vector3(0, -0.5, 0)

[node name="Flashlight" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.48628458, 1.5734493, -1.492104)
visible = false
light_energy = 8.551
light_volumetric_fog_energy = 1.281
light_projector = ExtResource("2_bms3g")
light_specular = 1.039
shadow_enabled = true
spot_angle_attenuation = 1.4142134

[node name="Shadow" type="Decal" parent="."]
size = Vector3(2, 3, 2)
texture_albedo = ExtResource("3_me0cc")
modulate = Color(0, 0, 0, 1)
albedo_mix = 0.6
cull_mask = 1048063

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="SubViewportContainer" type="SubViewportContainer" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_46y3y")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="CanvasLayer/SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
msaa_2d = 1
screen_space_aa = 1
oversampling_override = 2.0
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="Control" type="Control" parent="CanvasLayer/SubViewportContainer/SubViewport"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="InfoCaption" type="PanelContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control" node_paths=PackedStringArray("label", "with_key_name_container", "key_label2")]
clip_contents = true
custom_minimum_size = Vector2(128, 56)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -64.0
offset_top = -236.0
offset_right = 64.0
offset_bottom = -180.0
grow_horizontal = 2
grow_vertical = 0
pivot_offset = Vector2(64, 28)
theme_override_styles/panel = SubResource("StyleBoxFlat_2wrp4")
script = ExtResource("5_qbdof")
label = NodePath("HBoxContainer/Label")
with_key_name_container = NodePath("HBoxContainer/WithKeyName")
key_label2 = NodePath("HBoxContainer/WithKeyName/LabelPart2")

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer"]
visible = false
custom_minimum_size = Vector2(54, 0)
layout_mode = 2
size_flags_horizontal = 0

[node name="IconContainer" type="CenterContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer"]
custom_minimum_size = Vector2(54, 0)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer/IconContainer"]
custom_minimum_size = Vector2(44, 46)
layout_mode = 2
texture = ExtResource("6_2wrp4")
expand_mode = 1

[node name="SeparatorContainer" type="CenterContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer"]
custom_minimum_size = Vector2(2, 0)
layout_mode = 2

[node name="Separator" type="Panel" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer/SeparatorContainer"]
custom_minimum_size = Vector2(2, 48)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
theme_override_styles/panel = SubResource("StyleBoxFlat_7lbay")

[node name="Label" type="RichTextLabel" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/outline_size = 5
theme_override_font_sizes/normal_font_size = 20
bbcode_enabled = true
text = "hello"
fit_content = true
scroll_active = false
autowrap_mode = 0
vertical_alignment = 1

[node name="WithKeyName" type="HBoxContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="LabelPart1" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer/WithKeyName" instance=ExtResource("7_4n5g4")]
visible = false
layout_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer/WithKeyName"]
visible = false
layout_mode = 2

[node name="KeyName" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer/WithKeyName/HBoxContainer" instance=ExtResource("7_hg0js")]
layout_mode = 2

[node name="LabelPart2" type="RichTextLabel" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/InfoCaption/HBoxContainer/WithKeyName"]
visible = false
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/outline_size = 5
theme_override_font_sizes/normal_font_size = 20
bbcode_enabled = true
text = "to jump."
fit_content = true
scroll_active = false
autowrap_mode = 0
vertical_alignment = 1

[node name="GUI_Container" type="MarginContainer" parent="CanvasLayer/SubViewportContainer/SubViewport/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 8
theme_override_constants/margin_top = 24
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 24

[node name="ReferenceRect" type="ReferenceRect" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/GUI_Container"]
layout_mode = 2
border_color = Color(1, 0, 0.8, 1)
border_width = 1.6

[node name="Control" type="Control" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/GUI_Container"]
layout_mode = 2

[node name="UI_FPS" type="Label" parent="CanvasLayer/SubViewportContainer/SubViewport/Control/GUI_Container/Control"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -68.0
offset_bottom = 29.0
grow_horizontal = 0
theme_override_constants/outline_size = 5
theme_override_font_sizes/font_size = 20
text = "??? FPS"
script = ExtResource("5_ejohg")
metadata/_custom_type_script = "uid://crl5y3f7qfi0p"

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="crosshair" type="TextureRect" parent="CanvasLayer/Control"]
material = ExtResource("4_7lbay")
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -32.0
offset_top = -32.0
offset_right = 32.0
offset_bottom = 32.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("4_hqdnm")
